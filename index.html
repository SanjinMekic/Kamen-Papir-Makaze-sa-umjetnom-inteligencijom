<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Rock Paper Scissors with AI</title>
    <script src="//unpkg.com/brain.js"></script>
    <script defer src="app.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="style.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Nunito&family=Nunito+Sans:opsz,wght@6..12,500&family=Varela+Round&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <div class="glavniContainer">
      <div class="lijevo">
        <div class="game-area">
          <div class="choices">
            <button class="choice-button" onclick="humanInput(1)" title="Kamen">üëä</button>
            <button class="choice-button" onclick="humanInput(2)" title="Papir">‚úã</button>
            <button class="choice-button" onclick="humanInput(3)" title="Makaze">‚úåÔ∏è</button>
          </div>

          <div class="rezultatiPartije">
            <h2>Rezultat partije</h2>
            <p class="human-choice">
              Odabrali ste: <span id="humanChoice"></span>
            </p>
            <p class="izborAI">
              AI je odabrala:
              <span
                id="aiChoiceImage"
                class="ai-choice"
              >‚ùì</span>
            </p>
            <div class="pobjednikTekst">
              <p>Pobjednik: <span id="winner"></span></p>
            </div>
          </div>
        </div>
      </div>

      <div class="desno">
        <div class="rezultatiUkupno">
          <h2>Ukupni rezultat</h2>
          <div class="score-grid">
            <p class="rezultatTekst">ƒåovjek: <span id="humanScore">0</span></p>
            <p class="rezultatTekst">AI: <span id="aiScore">0</span></p>
            <p class="rezultatTekst">Nerije≈°eno: <span id="drawScore">0</span></p>
            <p class="rezultatTekst">Ukupno partija: <span id="totalGames">0</span></p>
          </div>
          <button onclick="resetScore()" class="reset-button">Restart</button>
        </div>

        <div class="settings-container">
          <h2>Postavke</h2>
          <div class="settings-grid">
            <div class="settings-group">
              <label for="patternLengthSlider">
                Du≈æina obrasca: <span id="patternLengthValue">20</span>
              </label>
              <input
                id="patternLengthSlider"
                type="range"
                min="10"
                max="30"
                step="5"
                value="20"
                oninput="updatePatternLength(this.value)"
              />
            </div>

            <div class="settings-group">
              <label for="iterationsSlider">
                Broj iteracija: <span id="iterationsValue">200</span>
              </label>
              <input
                id="iterationsSlider"
                type="range"
                min="100"
                max="500"
                step="50"
                value="200"
                oninput="updateIterations(this.value)"
              />
            </div>
          </div>
        </div>

        <div class="grafik">
          <h2>Grafik rezultata</h2>
          <canvas id="scoreChart"></canvas>
        </div>
      </div>
    </div>

    <button class="settings-button" onclick="toggleSettings()" title="Upute">‚öôÔ∏è</button>

    <div id="settingsModal" class="settings-modal">
      <div class="settings-content">
        <div class="settings-header">
          <h2>Upute</h2>
          <button class="settings-close" onclick="toggleSettings()">√ó</button>
        </div>
        
        <div class="instructions-content">
          <p>
            <strong>1. Du≈æina obrasca (pattern length)</strong><br />
            Ovo je du≈æina sekvence koja se koristi za treniranje modela. Du≈æi
            obrazac daje modelu vi≈°e informacija o korisnikovim prethodnim
            potezima, ali previ≈°e dugaƒçak obrazac mo≈æe dovesti do gubitka
            znaƒçajnih veza zbog ograniƒçenja memorije modela. Iz ovog razloga
            du≈æina sekvence je ograniƒçena na masksimalnu vrijednost 30.<br />
            <strong>Preporuka:</strong><br />
            - 10‚Äì20: Dobar raspon.<br />
            - Kraƒái obrazac ako korisnici ƒçesto mijenjaju obrazac.<br />
            - Du≈æi obrazac za kompleksne obrasce.
          </p>
          <p>
            <strong>2. Broj iteracija (iterations)</strong><br />
            Ovo je broj iteracija koje model koristi za uƒçenje obrazaca. Veƒái broj
            iteracija mo≈æe pobolj≈°ati preciznost, ali preveliki broj mo≈æe dovesti
            do pretreniranja i usporavanja. Iz ovog razloga broj iteracija je
            ograniƒçena na masksimalnu vrijednost 500.<br />
            <strong>Preporuka:</strong><br />
            - 100‚Äì200: Brzo treniranje.<br />
            - 300‚Äì500: Detaljno predviƒëanje.
          </p>
          <table>
            <thead>
              <tr>
                <th>Du≈æina obrasca</th>
                <th>Broj iteracija</th>
                <th>Preporuƒçeno za...</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>10</td>
                <td>100‚Äì200</td>
                <td>Visoka preciznost, manji obrasci.</td>
              </tr>
              <tr>
                <td>20</td>
                <td>200‚Äì300</td>
                <td>Uravnote≈æen trening, idealne vrijednosti</td>
              </tr>
              <tr>
                <td>30</td>
                <td>300‚Äì500</td>
                <td>Dugi obrasci i detaljno predviƒëanje.</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>

    <script>
      function toggleSettings() {
        const modal = document.getElementById('settingsModal');
        modal.classList.toggle('active');
      }

      // Close settings modal when clicking outside
      document.getElementById('settingsModal').addEventListener('click', function(e) {
        if (e.target === this) {
          this.classList.remove('active');
        }
      });
    </script>
  </body>
</html>
